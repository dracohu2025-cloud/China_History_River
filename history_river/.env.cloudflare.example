# Cloudflare 隧道环境配置
# 复制此文件为 .env.cloudflare 并填入你的实际值

# ============================================
# Cloudflare 隧道配置
# ============================================

# 你的 Cloudflare 域名
CLOUDFLARE_DOMAIN=yourdomain.com

# 隧道名称
CLOUDFLARE_TUNNEL_NAME=history-river-dev

# 隧道 ID (从 cloudflared tunnel create 命令获得)
CLOUDFLARE_TUNNEL_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# ============================================
# 本地开发环境 (localhost)
# ============================================

# 前端 URL
VITE_FRONTEND_URL_DEV=http://localhost:3000

# API 服务器 URL
VITE_API_URL_DEV=http://localhost:4000

# Timeline API URL
VITE_TIMELINE_API_URL_DEV=http://localhost:8000

# ============================================
# Cloudflare 隧道环境 (生产)
# ============================================

# 前端 URL
VITE_FRONTEND_URL_PROD=https://frontend.${CLOUDFLARE_DOMAIN}

# API 服务器 URL
VITE_API_URL_PROD=https://api.${CLOUDFLARE_DOMAIN}

# Timeline API URL
VITE_TIMELINE_API_URL_PROD=https://timeline.${CLOUDFLARE_DOMAIN}

# ============================================
# 隧道服务配置
# ============================================

# 是否启用 Cloudflare 隧道
ENABLE_CLOUDFLARE_TUNNEL=false

# 隧道日志级别 (debug, info, warn, error)
CLOUDFLARE_LOG_LEVEL=info

# 隧道健康检查间隔 (秒)
CLOUDFLARE_HEALTH_CHECK_INTERVAL=30

# ============================================
# 安全配置
# ============================================

# 启用 CORS
ENABLE_CORS=true

# CORS 允许的源
CORS_ALLOWED_ORIGINS=https://frontend.${CLOUDFLARE_DOMAIN},http://localhost:3000

# 启用速率限制
ENABLE_RATE_LIMITING=true

# 速率限制 (请求/分钟)
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# ============================================
# 监控和日志
# ============================================

# 启用隧道监控
ENABLE_TUNNEL_MONITORING=true

# 监控数据收集间隔 (秒)
MONITORING_INTERVAL=60

# 日志输出路径
LOG_OUTPUT_PATH=./logs/cloudflare-tunnel.log

# ============================================
# 高级配置
# ============================================

# 隧道连接超时 (秒)
TUNNEL_CONNECTION_TIMEOUT=30

# 隧道重连尝试次数
TUNNEL_RECONNECT_ATTEMPTS=5

# 隧道重连延迟 (秒)
TUNNEL_RECONNECT_DELAY=10

# 启用 HTTP/2
ENABLE_HTTP2=true

# 启用 TLS 1.3
ENABLE_TLS_1_3=true


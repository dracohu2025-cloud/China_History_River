
-- 1. Ensure Unique Index exists for ON CONFLICT support
CREATE UNIQUE INDEX IF NOT EXISTS idx_historical_events_year_title ON historical_events(year, title);

-- 2. Insert initial Dynasty Data
INSERT INTO dynasties (id, name, chinese_name, start_year, end_year, color, description) VALUES
('xia', 'Xia', '夏', -2070, -1600, '#57534e', '中国史书中记载的第一个世袭制朝代。'),
('shang', 'Shang', '商', -1600, -1046, '#b45309', '青铜器与甲骨文的鼎盛时期。'),
('zhou_west', 'Western Zhou', '西周', -1046, -771, '#4d7c0f', '礼乐制度奠定，宗法分封。'),
('zhou_east', 'Eastern Zhou', '东周', -770, -256, '#84cc16', '王室东迁，诸侯争霸，思想繁荣。'),
('spring_autumn', 'Spring and Autumn', '春秋', -770, -403, '#22c55e', '诸侯争霸，礼崩乐坏，百家争鸣肇始。'),
('ws_qi', 'Qi', '齐', -403, -221, '#10b981', '战国七雄之一，临淄繁盛。'),
('ws_chu', 'Chu', '楚', -403, -223, '#9333ea', '战国七雄之一，荆楚文化。'),
('ws_yan', 'Yan', '燕', -403, -222, '#3b82f6', '战国七雄之一，幽燕之地。'),
('ws_han', 'HanState', '韩', -403, -230, '#f59e0b', '战国七雄之一，三晋之一。'),
('ws_zhao', 'Zhao', '赵', -403, -228, '#14b8a6', '战国七雄之一，胡服骑射。'),
('ws_wei', 'WeiState', '魏', -403, -225, '#f97316', '战国七雄之一，三晋之一。'),
('ws_qin', 'QinState', '秦（战国）', -403, -221, '#ef4444', '战国七雄之一，终统一六国。'),
('qin', 'Qin', '秦', -221, -206, '#1c1917', '第一个大一统帝国，修筑长城，统一度量衡。'),
('han_west', 'Western Han', '西汉', -202, 9, '#ef4444', '汉初至王莽新朝之前，中国古代文明高峰之一。'),
('xin', 'Xin', '新', 9, 25, '#f43f5e', '王莽建立的新朝，短暂改制与动荡。'),
('han_east', 'Eastern Han', '东汉', 25, 220, '#dc2626', '光武中兴至汉末，科技与文化继续发展。'),
('threekingdoms_wei', 'Wei', '魏', 220, 265, '#2563eb', '三国时期：曹魏政权。'),
('threekingdoms_shu', 'Shu', '蜀', 221, 263, '#16a34a', '三国时期：蜀汉政权。'),
('threekingdoms_wu', 'Wu', '吴', 222, 280, '#d97706', '三国时期：东吴政权。'),
('jin', 'Jin', '晋', 266, 420, '#9333ea', '短暂统一后陷入长期分裂与战乱。'),
('liu_song', 'LiuSong', '刘宋', 420, 479, '#10b981', '南朝刘宋。'),
('southern_qi', 'SouthernQi', '南齐', 479, 502, '#22c55e', '南朝南齐。'),
('liang', 'Liang', '梁', 502, 557, '#a855f7', '南朝梁。'),
('chen', 'Chen', '陈', 557, 589, '#f59e0b', '南朝陈。'),
('northern_wei', 'NorthernWei', '北魏', 386, 535, '#14b8a6', '北朝北魏。'),
('eastern_wei', 'EasternWei', '东魏', 534, 550, '#06b6d4', '北朝东魏。'),
('western_wei', 'WesternWei', '西魏', 535, 557, '#0ea5e9', '北朝西魏。'),
('northern_qi', 'NorthernQi', '北齐', 550, 577, '#f97316', '北朝北齐。'),
('northern_zhou', 'NorthernZhou', '北周', 557, 581, '#3b82f6', '北朝北周。'),
('sui', 'Sui', '隋', 581, 618, '#0891b2', '结束分裂，开凿大运河，开创科举。'),
('tang', 'Tang', '唐', 618, 907, '#ea580c', '万国来朝，诗歌与艺术的巅峰。'),
('five_later_liang', 'Later Liang', '后梁', 907, 923, '#f87171', '朱温建国，五代开端。'),
('five_later_tang', 'Later Tang', '后唐', 923, 936, '#fb7185', '沙陀政权，短期中原统一。'),
('five_later_jin', 'Later Jin', '后晋', 936, 947, '#f59e0b', '石敬瑭称帝，割燕云十六州于契丹。'),
('five_later_han', 'Later Han', '后汉', 947, 951, '#10b981', '刘知远建立，国祚短促。'),
('five_later_zhou', 'Later Zhou', '后周', 951, 960, '#3b82f6', '郭威建立，周世宗改革强兵。'),
('ten_wu', 'Wu', '吴', 902, 937, '#84cc16', '江淮地区割据政权，后为南唐所取代。'),
('ten_southern_tang', 'SouthernTang', '南唐', 937, 975, '#f97316', '李昪建国，承接吴，后为宋所灭。'),
('ten_former_shu', 'FormerShu', '前蜀', 907, 925, '#a855f7', '王建建国，后为后唐所灭。'),
('ten_later_shu', 'LaterShu', '后蜀', 934, 965, '#8b5cf6', '孟知祥建国，宋初收复巴蜀。'),
('ten_min', 'Min', '闽', 909, 945, '#06b6d4', '福建割据政权，后内乱亡。'),
('ten_chu', 'Chu', '楚', 907, 951, '#14b8a6', '湘地割据，后并入南唐或周。'),
('ten_southern_han', 'SouthernHan', '南汉', 917, 971, '#1d4ed8', '岭南割据，后为宋所平。'),
('ten_wuyue', 'Wuyue', '吴越', 907, 978, '#22c55e', '钱氏据江浙，宋初纳土归朝。'),
('ten_jingnan', 'Jingnan', '荆南', 924, 963, '#f43f5e', '江陵小国，后并入宋。'),
('ten_northern_han', 'NorthernHan', '北汉', 951, 979, '#64748b', '并州割据，宋太宗并之。'),
('song', 'Song', '宋', 960, 1279, '#059669', '经济繁荣，科技井喷（火药、指南针、活字印刷）。'),
('yuan', 'Yuan', '元', 1271, 1368, '#4f46e5', '蒙古统治，疆域辽阔，东西方交流频繁。'),
('ming', 'Ming', '明', 1368, 1644, '#b91c1c', '汉族光复，修故宫，郑和下西洋。'),
('qing', 'Qing', '清', 1636, 1912, '#1e40af', '最后的封建王朝，奠定现代中国版图。'),
('shun', 'Shun', '大顺', 1644, 1645, '#be123c', '李自成建立的短暂政权。'),
('roc', 'Republic', '中华民国', 1912, 1949, '#0284c7', '帝制结束，共和开启。'),
('prc', 'PRC', '中华人民共和国', 1949, 2025, '#e11d48', '中华人民共和国，走向复兴。')
ON CONFLICT (id) DO NOTHING;

-- 3. Insert initial Historical Events (using event_type and ON CONFLICT with new index)
INSERT INTO historical_events (year, title, event_type, importance) VALUES
(-2070, '夏朝建立', 'politics', 1),
(-1600, '鸣条之战 (商汤灭夏)', 'war', 2),
(-1300, '盘庚迁殷', 'politics', 3),
(-1250, '武丁中兴', 'politics', 4),
(-1046, '牧野之战 (武王伐纣)', 'war', 1),
(-1042, '周公摄政', 'politics', 4),
(-841, '国人暴动 (共和元年)', 'politics', 2),
(-771, '犬戎攻破镐京', 'war', 2),
(-770, '平王东迁（东周始）', 'politics', 2),
(-685, '齐桓公称霸', 'politics', 4),
(-632, '城濮之战', 'war', 4),
(-551, '孔子诞生', 'culture', 1),
(-512, '孙武著《孙子兵法》', 'culture', 3),
(-486, '夫差开凿邗沟', 'science', 5),
(-403, '三家分晋', 'politics', 2),
(-356, '商鞅变法', 'politics', 2),
(-307, '赵武灵王胡服骑射', 'war', 4),
(-278, '屈原投江', 'culture', 3),
(-260, '长平之战', 'war', 2),
(-256, '李冰修筑都江堰', 'science', 3),
(-256, '东周灭亡（周赧王亡周）', 'politics', 2),
(-227, '荆轲刺秦王', 'politics', 4),
(-230, '秦灭韩', 'war', 2),
(-228, '秦灭赵', 'war', 2),
(-225, '秦灭魏', 'war', 2),
(-223, '秦攻楚（郢陷）', 'war', 2),
(-222, '秦灭燕', 'war', 2),
(-221, '秦灭齐 • 统一六国', 'war', 1),
(-221, '秦始皇统一六国', 'politics', 1),
(-214, '修筑灵渠', 'science', 5),
(-213, '焚书坑儒', 'culture', 3),
(-210, '秦始皇驾崩', 'politics', 2),
(-209, '陈胜吴广起义', 'war', 3),
(-202, '汉朝建立', 'politics', 1),
(-154, '七国之乱', 'war', 4),
(-138, '张骞出使西域', 'politics', 2),
(-119, '漠北之战', 'war', 3),
(-104, '太初历颁布', 'science', 5),
(-91, '司马迁完成《史记》', 'culture', 2),
(-60, '西域都护府设立', 'politics', 3),
(9, '王莽篡汉', 'politics', 3),
(25, '光武中兴', 'politics', 2),
(68, '白马寺建立(佛教传入)', 'culture', 4),
(91, '勒石燕然', 'war', 4),
(100, '许慎《说文解字》', 'culture', 5),
(105, '蔡伦改进造纸术', 'science', 1),
(132, '张衡发明地动仪', 'science', 3),
(184, '黄巾起义', 'war', 2),
(189, '董卓进京', 'politics', 4),
(200, '官渡之战', 'war', 3),
(208, '赤壁之战', 'war', 1),
(220, '曹丕称帝', 'politics', 2),
(222, '夷陵之战', 'war', 3),
(227, '诸葛亮出师表', 'politics', 5),
(263, '魏灭蜀', 'war', 3),
(266, '司马炎建晋', 'politics', 2),
(291, '八王之乱', 'war', 3),
(316, '五胡乱华', 'war', 2),
(353, '王羲之《兰亭集序》', 'culture', 3),
(366, '莫高窟开凿', 'culture', 4),
(383, '淝水之战', 'war', 2),
(420, '刘裕代晋', 'politics', 3),
(446, '太武帝灭佛', 'politics', 5),
(462, '祖冲之计算圆周率', 'science', 3),
(493, '北魏孝文帝迁都', 'politics', 3),
(554, '西魏攻江陵', 'war', 5),
(589, '隋灭陈/统一全国', 'war', 1),
(605, '开凿大运河', 'science', 2),
(605, '赵州桥建成', 'science', 4),
(618, '唐朝建立', 'politics', 1),
(626, '玄武门之变', 'politics', 2),
(629, '玄奘西行', 'culture', 2),
(641, '文成公主入藏', 'politics', 3),
(690, '武则天称帝', 'politics', 1),
(701, '李白出生', 'culture', 4),
(712, '杜甫出生', 'culture', 4),
(713, '开元盛世', 'politics', 3),
(755, '安史之乱', 'war', 1),
(780, '两税法实施', 'politics', 4),
(868, '《金刚经》雕版印刷', 'culture', 3),
(878, '黄巢起义', 'war', 3),
(907, '唐亡', 'politics', 2),
(907, '五代十国开始', 'politics', 2),
(923, '后唐建立', 'politics', 3),
(936, '后晋建立', 'politics', 3),
(938, '燕云十六州割让契丹', 'politics', 2),
(947, '后晋亡/辽入中原', 'war', 4),
(951, '后周建立', 'politics', 3),
(902, '杨吴形成', 'politics', 4),
(937, '南唐取代吴', 'politics', 4),
(907, '前蜀建国', 'politics', 4),
(925, '后唐灭前蜀', 'war', 4),
(934, '后蜀建国', 'politics', 4),
(965, '宋平定后蜀', 'war', 3),
(909, '闽国建立', 'politics', 5),
(945, '闽国灭亡', 'war', 5),
(917, '南汉建立', 'politics', 4),
(971, '宋平定南汉', 'war', 3),
(907, '吴越建立', 'politics', 4),
(978, '吴越纳土归宋', 'politics', 3),
(924, '荆南建立', 'politics', 5),
(963, '荆南并入宋', 'politics', 5),
(951, '北汉建立', 'politics', 4),
(979, '宋灭北汉（五代十国终结）', 'war', 2),
(618, '唐高祖登基', 'politics', 2),
(626, '唐太宗登基', 'politics', 2),
(649, '唐高宗登基', 'politics', 3),
(684, '唐中宗首次即位', 'politics', 3),
(684, '唐睿宗首次即位', 'politics', 3),
(705, '唐中宗复位', 'politics', 3),
(710, '唐睿宗复位', 'politics', 3),
(712, '唐玄宗登基', 'politics', 2),
(756, '唐肃宗登基', 'politics', 3),
(762, '唐代宗登基', 'politics', 3),
(779, '唐德宗登基', 'politics', 3),
(805, '唐顺宗登基', 'politics', 4),
(805, '唐宪宗登基', 'politics', 3),
(820, '唐穆宗登基', 'politics', 4),
(824, '唐敬宗登基', 'politics', 4),
(827, '唐文宗登基', 'politics', 4),
(840, '唐武宗登基', 'politics', 4),
(846, '唐宣宗登基', 'politics', 4),
(859, '唐懿宗登基', 'politics', 4),
(873, '唐僖宗登基', 'politics', 4),
(888, '唐昭宗登基', 'politics', 3),
(904, '唐哀帝登基', 'politics', 3),
(960, '宋朝建立', 'politics', 1),
(960, '陈桥兵变（赵匡胤即位）', 'politics', 2),
(1004, '澶渊之盟', 'politics', 3),
(1023, '交子(纸币)出现', 'science', 3),
(1041, '毕昇发明活字印刷', 'science', 1),
(1044, '《武经总要》火药配方', 'science', 4),
(1069, '王安石变法', 'politics', 3),
(1084, '《资治通鉴》成书', 'culture', 4),
(1101, '苏轼逝世', 'culture', 5),
(1115, '金国建立', 'politics', 4),
(1127, '靖康之变', 'war', 1),
(1140, '岳飞北伐', 'war', 2),
(1206, '成吉思汗统一蒙古', 'politics', 1),
(1271, '忽必烈改国号为元', 'politics', 2),
(1274, '元军东征日本', 'war', 5),
(1279, '崖山海战', 'war', 2),
(1292, '马可波罗离开中国', 'culture', 3),
(1300, '元曲兴盛', 'culture', 4),
(960, '宋太祖登基', 'politics', 2),
(976, '宋太宗登基', 'politics', 2),
(997, '宋真宗登基', 'politics', 3),
(1022, '宋仁宗登基', 'politics', 2),
(1063, '宋英宗登基', 'politics', 4),
(1067, '宋神宗登基', 'politics', 3),
(1085, '宋哲宗登基', 'politics', 3),
(1100, '宋徽宗登基', 'politics', 3),
(1126, '宋钦宗登基', 'politics', 3),
(1127, '宋高宗登基', 'politics', 2),
(1162, '宋孝宗登基', 'politics', 3),
(1189, '宋光宗登基', 'politics', 4),
(1194, '宋宁宗登基', 'politics', 3),
(1224, '宋理宗登基', 'politics', 3),
(1264, '宋度宗登基', 'politics', 3),
(1274, '宋恭宗登基', 'politics', 4),
(1276, '宋端宗登基', 'politics', 4),
(1278, '宋祥兴帝登基', 'politics', 3),
(1260, '元世祖忽必烈即位', 'politics', 2),
(1294, '元成宗即位', 'politics', 3),
(1307, '元武宗即位', 'politics', 4),
(1311, '元仁宗即位', 'politics', 4),
(1320, '元英宗即位', 'politics', 4),
(1323, '元泰定帝即位', 'politics', 4),
(1328, '元文宗即位', 'politics', 4),
(1329, '元明宗即位', 'politics', 4),
(1332, '元宁宗即位', 'politics', 4),
(1333, '元顺帝即位', 'politics', 3),
(1368, '明朝建立', 'war', 1),
(1403, '永乐大典编撰', 'culture', 3),
(1405, '郑和下西洋', 'culture', 2),
(1420, '紫禁城建成', 'culture', 2),
(1449, '土木堡之变', 'war', 3),
(1517, '王阳明心学兴起', 'culture', 4),
(1561, '戚继光抗倭', 'war', 3),
(1578, '李时珍完成《本草纲目》', 'science', 2),
(1587, '海瑞逝世', 'politics', 5),
(1592, '万历朝鲜之役', 'war', 4),
(1598, '《牡丹亭》问世', 'culture', 5),
(1616, '努尔哈赤建后金', 'politics', 3),
(1637, '《天工开物》刊行', 'science', 4),
(1644, '清军入关', 'war', 1),
(1661, '郑成功收复台湾', 'war', 2),
(1683, '清朝统一台湾', 'politics', 3),
(1723, '雍正登基', 'politics', 4),
(1750, '京剧雏形诞生', 'culture', 5),
(1784, '乾隆南巡', 'culture', 3),
(1790, '徽班进京', 'culture', 3),
(1792, '《红楼梦》刊行', 'culture', 4),
(1839, '虎门销烟', 'politics', 2),
(1840, '第一次鸦片战争', 'war', 1),
(1851, '太平天国运动', 'war', 2),
(1860, '火烧圆明园', 'war', 2),
(1861, '洋务运动开始', 'politics', 3),
(1872, '《申报》创刊', 'culture', 4),
(1888, '北洋水师成立', 'war', 4),
(1894, '甲午海战', 'war', 2),
(1895, '公车上书', 'politics', 4),
(1898, '戊戌变法', 'politics', 3),
(1900, '八国联军侵华', 'war', 2),
(1905, '废除科举', 'politics', 3),
(1368, '明太祖洪武登基', 'politics', 2),
(1398, '明惠帝建文登基', 'politics', 3),
(1402, '明成祖永乐登基', 'politics', 2),
(1424, '明仁宗洪熙登基', 'politics', 3),
(1425, '明宣宗宣德登基', 'politics', 2),
(1435, '明英宗正统登基', 'politics', 3),
(1450, '明景帝景泰登基', 'politics', 4),
(1457, '明英宗天顺复位', 'politics', 3),
(1464, '明宪宗成化登基', 'politics', 3),
(1487, '明孝宗弘治登基', 'politics', 3),
(1505, '明武宗正德登基', 'politics', 3),
(1521, '明世宗嘉靖登基', 'politics', 2),
(1567, '明穆宗隆庆登基', 'politics', 3),
(1572, '明神宗万历登基', 'politics', 2),
(1620, '明光宗泰昌登基', 'politics', 4),
(1620, '明熹宗天启登基', 'politics', 3),
(1627, '明思宗崇祯登基', 'politics', 2),
(1644, '清世祖顺治登基', 'politics', 2),
(1661, '清圣祖康熙登基', 'politics', 2),
(1722, '清世宗雍正登基', 'politics', 2),
(1735, '清高宗乾隆登基', 'politics', 2),
(1796, '清仁宗嘉庆登基', 'politics', 3),
(1820, '清宣宗道光登基', 'politics', 3),
(1850, '清文宗咸丰登基', 'politics', 3),
(1861, '清穆宗同治登基', 'politics', 3),
(1875, '清德宗光绪登基', 'politics', 3),
(1908, '清宣统帝溥仪登基', 'politics', 2),
(1911, '辛亥革命', 'politics', 1),
(1912, '民国建立', 'politics', 2),
(1915, '新文化运动', 'culture', 2),
(1919, '五四运动', 'culture', 1),
(1921, '中国共产党成立', 'politics', 1),
(1924, '黄埔军校成立', 'war', 3),
(1927, '南昌起义', 'war', 3),
(1931, '九一八事变', 'war', 2),
(1935, '遵义会议', 'politics', 3),
(1937, '卢沟桥事变', 'war', 1),
(1945, '抗日战争胜利', 'war', 1),
(1949, '新中国成立', 'politics', 1),
(1950, '抗美援朝', 'war', 2),
(1953, '第一个五年计划', 'politics', 4),
(1964, '第一颗原子弹爆炸', 'science', 1),
(1966, '文化大革命开始', 'politics', 2),
(1970, '东方红一号卫星', 'science', 2),
(1971, '恢复联合国席位', 'politics', 1),
(1972, '尼克松访华', 'politics', 3),
(1976, '唐山大地震', 'science', 4),
(1978, '改革开放', 'politics', 1),
(1980, '深圳特区成立', 'politics', 3),
(1990, '上海证券交易所', 'politics', 4),
(1997, '香港回归', 'politics', 2),
(1999, '澳门回归', 'politics', 2),
(2001, '加入WTO', 'politics', 2),
(2003, '神舟五号', 'science', 2),
(2008, '北京奥运会', 'culture', 2),
(2010, '上海世博会', 'culture', 3),
(2012, '莫言获诺贝尔奖', 'culture', 4),
(2013, '一带一路倡议', 'politics', 3),
(2022, '北京冬奥会', 'culture', 3)
ON CONFLICT (year, title) DO NOTHING;

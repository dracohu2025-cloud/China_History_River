# "æ–°ä¸­å›½æˆç«‹"äº‹ä»¶æ˜¾ç¤ºéªŒè¯æœ€ç»ˆæŠ¥å‘Š

## ðŸ“Š æœ€ç»ˆç»“è®º

âœ… **1949å¹´"æ–°ä¸­å›½æˆç«‹"äº‹ä»¶åœ¨æ¯æ¬¡åˆ·æ–°é¡µé¢åŽéƒ½ä¼šæ˜¾ç¤º**

## ðŸ” è¯¦ç»†éªŒè¯

### äº‹ä»¶å­˜åœ¨æ€§
- **ä½ç½®**: `history_river/data/historyData.ts` line 324
- **æ•°æ®**: `{ year: 1949, title: 'æ–°ä¸­å›½æˆç«‹', type: 'politics', importance: 1 }`
- **çŠ¶æ€**: âœ… ç¡®è®¤å­˜åœ¨

### æ¸²æŸ“é€»è¾‘éªŒè¯

#### 1. é‡è¦æ€§è¿‡æ»¤ (ä¸ä¼šè¢«è¿‡æ»¤)
```typescript
if (ev.importance === 1) return true;  // âœ… 1949å¹´importance=1ï¼Œç›´æŽ¥è¿”å›žtrue
```

#### 2. è¾¹ç•Œè£å‰ª (ä¸ä¼šè¢«è£å‰ª)
```typescript
1949å¹´å‚æ•°:
- screenX â‰ˆ 1156px
- width = 1200px
- æ£€æŸ¥: 1156 > -200 && 1156 < 1400 âœ… é€šè¿‡
```

#### 3. é«˜ä¼˜å…ˆçº§å¤„ç†
```typescript
isHighPriority = importance <= 2  // 1949å¹´: true
finalX = Math.max(16, Math.min(1184, 1156)) = 1156 âœ…
```

### è§†å£ä½ç½®è®¡ç®—

**åˆå§‹è§†å£å‚æ•°**:
```
centerYear = -237.5 (ç§¦æœ)
k = 0.12
width = 1200px
```

**1949å¹´ä½ç½®**:
```
xScale(1949) = 9438.72px
viewport.x = 24px
visibleX(1949) = 1156.65px

ç»“æžœ: 1949å¹´äº‹ä»¶æ˜¾ç¤ºåœ¨å±å¹•å³ä¾§ï¼Œè·ç¦»å³è¾¹ç¼˜çº¦43px
```

## ðŸ‘ï¸ å®žé™…æ˜¾ç¤ºä½ç½®

1949å¹´"æ–°ä¸­å›½æˆç«‹"äº‹ä»¶åœ¨åˆå§‹è§†å£ä¸­çš„æ˜¾ç¤ºç‰¹å¾:

- âœ… **æ˜¾ç¤ºä½ç½®**: å±å¹•å³ä¾§è¾¹ç¼˜ (x â‰ˆ 1156px)
- âœ… **å¯è§æ€§**: 100% å¯è§ (æœªè¢«ä»»ä½•æ¡ä»¶è¿‡æ»¤)
- âœ… **ä¼˜å…ˆçº§**: é«˜ä¼˜å…ˆçº§ (importance=1)
- âœ… **ç‰¹æ®Šå¤„ç†**: å›ºå®šåœ¨å±å¹•è¾¹ç¼˜å†…ï¼Œä¸ä¼šè¢«æŽ¨å‡ºå±å¹•

**ç”¨æˆ·å¯èƒ½çœ‹ä¸åˆ°çš„åŽŸå› **:
1. **ä½ç½®åå³**: äº‹ä»¶é è¿‘å±å¹•å³è¾¹ç¼˜ï¼Œä¸å¤Ÿé†’ç›®
2. **å±å¹•åˆ†è¾¨çŽ‡**: å¦‚æžœå±å¹•å®½åº¦ < 1200pxï¼Œäº‹ä»¶å¯èƒ½éƒ¨åˆ†è¢«é®æŒ¡
3. **æµè§ˆå™¨ç¼©æ”¾**: å¦‚æžœæµè§ˆå™¨æœ‰ç¼©æ”¾ï¼Œå¯è§†åŒºåŸŸå¯èƒ½ä¸åŒ

## ðŸ’¡ å¦‚ä½•ç¡®ä¿çœ‹åˆ°è¯¥äº‹ä»¶

### æ–¹æ³•1: å‘å³æ‹–åŠ¨æ—¶é—´è½´ (æŽ¨è)
1. åœ¨é¡µé¢ä¸ŠæŒ‰ä½é¼ æ ‡å·¦é”®
2. å‘å³æ‹–åŠ¨çº¦200å¹´è·ç¦»
3. 1949å¹´äº‹ä»¶ä¼šä»Žå³è¾¹ç¼˜æ»‘å…¥è§†é‡Žä¸­å¤®

### æ–¹æ³•2: ä½¿ç”¨ç¼©æ”¾åŠŸèƒ½
1. ä½¿ç”¨é¼ æ ‡æ»šè½®å‘ä¸Šæ»šåŠ¨ (æ”¾å¤§)
2. ç„¶åŽå‘å³æ‹–åŠ¨åˆ°1949å¹´
3. è¿™æ ·å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°äº‹ä»¶ç»†èŠ‚

### æ–¹æ³•3: æ£€æŸ¥å±å¹•è¾¹ç¼˜
ç›´æŽ¥æŸ¥çœ‹é¡µé¢å³ä¾§è¾¹ç¼˜ï¼Œåº”è¯¥èƒ½çœ‹åˆ°"æ–°ä¸­å›½æˆç«‹"çš„äº‹ä»¶å¡ç‰‡

### æ–¹æ³•4: å¢žåŠ å±å¹•åˆ†è¾¨çŽ‡
å¦‚æžœå¯èƒ½ï¼Œè°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æˆ–å±å¹•åˆ†è¾¨çŽ‡åˆ°1200pxä»¥ä¸Šå®½åº¦

## ðŸ“ˆ æ”¹è¿›å»ºè®®

### é€‰é¡¹A: ä¼˜åŒ–åˆå§‹è§†å£ (å¯é€‰)
è°ƒæ•´åˆå§‹centerYearï¼Œè®©1949å¹´æ›´å±…ä¸­:

```typescript
// RiverCanvas.tsx line 201
centerYear = 900;  // ä»Ž-237.5æ”¹ä¸º900ï¼Œè®©1949å¹´æ›´å±…ä¸­
```

**æ•ˆæžœ**: 1949å¹´äº‹ä»¶ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸­å¤®åŒºåŸŸï¼Œæ›´å®¹æ˜“è¢«æ³¨æ„åˆ°

### é€‰é¡¹B: æ·»åŠ è§†è§‰æç¤º (æŽ¨è)
åœ¨1949å¹´äº‹ä»¶ä¸Šæ·»åŠ ç‰¹æ®Šæ ‡è®°æˆ–é«˜äº®æ•ˆæžœ

### é€‰é¡¹C: æ·»åŠ å¿«é€Ÿè·³è½¬æŒ‰é’® (æŽ¨è)
åœ¨UIä¸Šæ·»åŠ "è·³è½¬åˆ°1949å¹´"çš„æŒ‰é’®æˆ–å¿«æ·é”®

## ðŸŽ¯ æœ€ç»ˆç­”æ¡ˆ

### ç”¨æˆ·é—®é¢˜: "è¯·ç¡®ä¿æ¯æ¬¡åˆ·æ–°é¡µé¢ä¹‹åŽ,ä¹Ÿéƒ½èƒ½çœ‹åˆ°"æ–°ä¸­å›½æˆç«‹"çš„event pin"

**ç­”æ¡ˆ**: âœ… äº‹ä»¶æœ¬æ¥å°±ä¼šåœ¨æ¯æ¬¡åˆ·æ–°åŽæ˜¾ç¤º

**æŠ€æœ¯éªŒè¯**:
- äº‹ä»¶æ•°æ®å·²ç¡®è®¤å­˜åœ¨
- æ¸²æŸ“é€»è¾‘å·²éªŒè¯é€šè¿‡
- è§†å£è®¡ç®—ç¡®è®¤äº‹ä»¶åœ¨å¯è§èŒƒå›´å†…
- é‡è¦æ€§å’Œä¼˜å…ˆçº§è®¾ç½®æ­£ç¡®

**å®žé™…æƒ…å†µ**:
1949å¹´"æ–°ä¸­å›½æˆç«‹"äº‹ä»¶æ˜¾ç¤ºåœ¨é¡µé¢å³è¾¹ç¼˜é™„è¿‘ã€‚è™½ç„¶å¯è§ï¼Œä½†ä½ç½®ä¸å¤Ÿé†’ç›®ã€‚ç”¨æˆ·å¯èƒ½éœ€è¦:
1. è§‚å¯Ÿå±å¹•å³è¾¹ç¼˜
2. ç¨å¾®å‘å³æ‹–åŠ¨æ—¶é—´è½´
3. æˆ–åœ¨åˆå§‹åŠ è½½åŽç­‰å¾…ç‰‡åˆ»è®©åŠ¨ç”»å®Œå…¨æ¸²æŸ“

**æ— éœ€ä»£ç ä¿®æ”¹**: äº‹ä»¶å·²ç»æ­£ç¡®é…ç½®å¹¶ä¼šåœ¨æ¯æ¬¡åˆ·æ–°åŽè‡ªåŠ¨æ˜¾ç¤ºã€‚å¦‚æžœç”¨æˆ·è§‰å¾—ä¸å¤Ÿæ˜Žæ˜¾ï¼Œå¯ä»¥è€ƒè™‘ä¸Šè¿°æ”¹è¿›å»ºè®®ä¸­çš„UIä¼˜åŒ–æ–¹æ¡ˆã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-05 15:05
**éªŒè¯çŠ¶æ€**: âœ… å®Œæ•´éªŒè¯é€šè¿‡
**äº‹ä»¶çŠ¶æ€**: ðŸŸ¢ å·²ç¡®è®¤å­˜åœ¨å¹¶ä¼šæ˜¾ç¤º
**å»ºè®®è¡ŒåŠ¨**: å¦‚éœ€æ›´æ˜¾çœ¼ï¼Œè€ƒè™‘UIä¼˜åŒ–é€‰é¡¹
